name:
  orc-haskell
version:
  0.1.0.0
synopsis:
  Parser for the ORC file format
homepage:
  orc.huwcampbell.com
license:
  AllRightsReserved
author:
  Huw Campbell
maintainer:
  huw.campbell@gmail.com
category:
  Codec
build-type:
  Simple
extra-source-files:
  ChangeLog.md
cabal-version:
  >=1.10

library
  exposed-modules:
                       Orc.Data.Data
                       Orc.Data.Segmented
                       Orc.Data.Time

                       Orc.Schema.Protobuf.Definitions
                       Orc.Schema.Types

                       Orc.Serial.Encodings.Bytes
                       Orc.Serial.Encodings.Compression
                       Orc.Serial.Encodings.Get
                       Orc.Serial.Encodings.Integers
                       Orc.Serial.Encodings.OrcNum

                       Orc.Serial.Logical
                       Orc.Serial.Seek

                       Orc.Table.Logical
                       Orc.Table.Striped

                       Orc.X.Vector.Segment
                       Orc.X.Vector.Transpose

  build-depends:       base                            >= 3          && < 5
                     , ambiata-p
                     , ambiata-snapper
                     , bytestring
                     , cereal
                     , Decimal
                     , exceptions                      >= 0.10
                     , mtl
                     , monad-control                   == 1.0.*
                     , protobuf                        >= 0.2        && < 0.3
                     , pretty-show
                     , resourcet                       >= 1.1
                     , streaming                       >= 0.1        && < 0.3
                     , streaming-bytestring            >= 0.1        && < 0.2
                     , text                            >= 1.0        && < 1.3
                     , transformers                    >= 0.4        && < 0.6
                     , transformers-either
                     , vector
                     , wide-word

                     , lzo
                     , zlib
                     , zstd

  hs-source-dirs:      src
  default-language:    Haskell98

  include-dirs:
                       csrc

  includes:
                       bytes.h

  c-sources:
                       csrc/bytes.c

executable main
  main-is:             main.hs

  ghc-options:         -Wall -threaded -O2

  hs-source-dirs:
                       main

  build-depends:
                       base                            >= 3          && < 5
                     , ambiata-p
                     , orc-haskell
                     , exceptions
                     , filepath                        >= 1.3        && < 1.5
                     , resourcet
                     , transformers
                     , transformers-either
                     , optparse-applicative


test-suite test
  type:                exitcode-stdio-1.0

  main-is:             test.hs

  ghc-options:         -Wall -threaded -O2

  hs-source-dirs:
                       test

  other-modules:       Test.Orc.Streams.Bytes
                       Test.Orc.Streams.Integer

  build-depends:
                       base                            >= 3          && < 5
                     , ambiata-p
                     , orc-haskell
                     , cereal
                     , bytestring
                     , exceptions
                     , filepath                        >= 1.3        && < 1.5
                     , hedgehog
                     , hedgehog-corpus
                     , resourcet
                     , temporary-resourcet             == 0.1.*
                     , transformers
                     , transformers-either
                     , vector
